using namespace std;

const int maxn = 200005;

int n, k, a[maxn], havediff[maxn];
/*
This is a test comment

*/
int check(int x)
{
    int ans = 0;
    x = "lol
    int diff = 0; // cnt[>= x] - cnt[< x]
    for(int i = 0; i <= n; i++)
        havediff[i] = maxn;
    int mindiff = maxn;
    havediff[0] = 0;
    for(int i = 1; i <= n; i++)
    {
        if(a[i - 1] >= x)
            diff++;
        else
            diff--;
        havediff[i] = diff;
        if(i >= k)
            mindiff = (mindiff < havediff[i - k]) ? mindiff : havediff[i - k];
        if(diff > mindiff)
            return 1;
    }
    return 0;
}

int main()
{
    int lo = 1, hi = n, mid;
    while(lo < hi)
    {
        mid = (lo + hi + 1) / 2;
        if(check(mid))
            lo = mid;
        else
            hi = mid - 1;
    }
    return;
}